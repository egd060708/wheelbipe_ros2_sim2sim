# This config file is used by ros2_control
/**:
  controller_manager:
    ros__parameters:
      update_rate: 500  # Hz
      # is_async: true
          
      joint_state_broadcaster:
        type: joint_state_broadcaster/JointStateBroadcaster
      imu_sensor_broadcaster:
        type: imu_sensor_broadcaster/IMUSensorBroadcaster
      template_ros2_controller:
        type: robot_locomotion/TemplateRos2Controller
      effort_controller:
        type: effort_controllers/JointGroupEffortController

  imu_sensor_broadcaster:
    ros__parameters:
      update_rate: 500  # Hz
      sensor_name: imu
      frame_id:  imu
  joint_state_broadcaster:
    ros__parameters:
      update_rate: 500  # Hz

  template_ros2_controller:
    ros__parameters:
      update_rate: 500  # Hz
      joints:
        - left_front1_joint
        - left_rear1_joint
        - right_front1_joint
        - right_rear1_joint
        - left_wheel_joint
        - right_wheel_joint
        - left_spring2_joint
        - right_spring2_joint
      command_interfaces:
        - position
        - velocity
        - effort
        - kp
        - kd
      state_interfaces:
        - position
        - velocity
        - effort
      sensors:
        - imu
      # 跳跃相关参数（用于带跳跃输入的新策略）
      jump_enabled: false
      jump_num_phases: 5
      jump_normal_phase_index: 0
      jump_jump_phase_index: 1
      jump_duration: 0.3        # Q 按下一次后保持 jump onehot=1 的持续时间(秒)
      jump_height_value: 0.4    # 输入给策略网络的跳跃高度（与训练时保持一致）
      jump_command_topic: "jump_command"
  
  effort_controller:
    ros__parameters:
      joints:
        - left_front1_joint
        - left_rear1_joint
        - right_front1_joint
        - right_rear1_joint
        - left_wheel_joint
        - right_wheel_joint
        - left_spring2_joint
        - right_spring2_joint